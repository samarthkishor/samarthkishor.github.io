<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="alternate" type="application/rss+xml" href=
  "https://samarthkishor.github.io/blog/rss.xml" title=
  "RSS feed for https://samarthkishor.github.io/blog/">
  <title>Samarth's Blog</title>
  <meta name="author" content="Samarth Kishor">
  <meta name="referrer" content="no-referrer">
  <link href="static/style.css" rel="stylesheet" type="text/css">
</head>
<body>
  <div id="preamble" class="status">
    <header>
      <nav>
        <ul>
          <li>
            <a href="/">About</a>
          </li>
          <li>
            <a href="/blog/">Blog</a>
          </li>
        </ul>
      </nav>
    </header>
  </div>
  <div id="content">
    <h1 class="title">Posts tagged "python":</h1>
    <div class="post-date">
      11 Mar 2020
    </div>
    <h1 class="post-title"><a href=
    "https://samarthkishor.github.io/blog/fizzbuzz-approaches.html">
    Three Completely Different Approaches to the FizzBuzz
    Problem</a></h1>
    <p>Here’s a solution to the classic infamous FizzBuzz problem
    in Python:</p>
    <div class="org-src-container">
      <pre class="src src-python"><span style=
      "color: #80A0C2;">for</span> i <span style=
      "color: #80A0C2;">in</span> <span style=
      "color: #8EBCBB;">range</span>(<span style=
      "color: #B58DAE; font-weight: bold;">1</span>, <span style=
      "color: #B58DAE; font-weight: bold;">31</span>):
    <span style="color: #80A0C2;">if</span> i % <span style=
"color: #B58DAE; font-weight: bold;">15</span> == <span style=
"color: #B58DAE; font-weight: bold;">0</span>:
        <span style="color: #80A0C2;">print</span>(<span style=
"color: #A2BF8A;">"FizzBuzz"</span>)
    <span style="color: #80A0C2;">elif</span> i % <span style=
"color: #B58DAE; font-weight: bold;">3</span> == <span style=
"color: #B58DAE; font-weight: bold;">0</span>:
        <span style="color: #80A0C2;">print</span>(<span style=
"color: #A2BF8A;">"Fizz"</span>)
    <span style="color: #80A0C2;">elif</span> i % <span style=
"color: #B58DAE; font-weight: bold;">5</span> == <span style=
"color: #B58DAE; font-weight: bold;">0</span>:
        <span style="color: #80A0C2;">print</span>(<span style=
"color: #A2BF8A;">"Buzz"</span>)
    <span style="color: #80A0C2;">else</span>:
        <span style="color: #80A0C2;">print</span>(i)
</pre>
    </div>
    <pre class="example">
1
2
Fizz
4
Buzz
Fizz
7
8
Fizz
Buzz
11
Fizz
13
14
FizzBuzz
16
17
Fizz
19
Buzz
Fizz
22
23
Fizz
Buzz
26
Fizz
28
29
FizzBuzz
</pre>
    <p>This program is really simple and is probably the most
    common approach. You just need to understand how
    <code>if</code> statements work and you’re good to go.</p>
    <p>We can take this up a notch by using type-driven exhaustive
    pattern-matching so that our programming language can actually
    tell us if we’ve made a mistake in our implementation. Here’s
    version 2 of the FizzBuzz program using the OCaml programming
    language:</p>
    <div class="org-src-container">
      <pre class="src src-ocaml"><span style=
      "color: #f5deb3; font-weight: bold;">open </span><span style=
      "color: #ECCC87;">Base</span>

<span style="color: #f5deb3; font-weight: bold;">let</span> () =
  <span style="color: #80A0C2;">for</span> i = <span style=
"color: #B58DAE; font-weight: bold;">1</span> <span style=
"color: #80A0C2;">to</span> <span style=
"color: #B58DAE; font-weight: bold;">30</span> <span style=
"color: #80A0C2;">do</span>
    <span style="color: #80A0C2;">match</span> <span style=
"color: #ECCC87;">Int.</span>rem i <span style=
"color: #B58DAE; font-weight: bold;">3</span>, <span style=
"color: #ECCC87;">Int.</span>rem i <span style=
"color: #B58DAE; font-weight: bold;">5</span> <span style=
"color: #80A0C2;">with</span>
    | <span style=
"color: #B58DAE; font-weight: bold;">0</span>, <span style=
"color: #B58DAE; font-weight: bold;">0</span> -&gt; <span style=
"color: #ECCC87;">Stdio.</span>print_endline <span style=
"color: #A2BF8A;">"FizzBuzz"</span>
    | <span style=
"color: #B58DAE; font-weight: bold;">0</span>, _ -&gt; <span style=
"color: #ECCC87;">Stdio.</span>print_endline <span style=
"color: #A2BF8A;">"Fizz"</span>
    | _, <span style=
"color: #B58DAE; font-weight: bold;">0</span> -&gt; <span style=
"color: #ECCC87;">Stdio.</span>print_endline <span style=
"color: #A2BF8A;">"Buzz"</span>
    | _, _ -&gt; <span style=
"color: #ECCC87;">Stdio.</span>printf <span style=
"color: #A2BF8A;">"%d\n"</span> i
  <span style="color: #80A0C2;">done</span>
</pre>
    </div>
    <pre class="example">
1
2
Fizz
4
Buzz
Fizz
7
8
Fizz
Buzz
11
Fizz
13
14
FizzBuzz
16
17
Fizz
19
Buzz
Fizz
22
23
Fizz
Buzz
26
Fizz
28
29
FizzBuzz
</pre>
    <p>Notice the <code>match</code> expression right after the
    <code>for</code> loop. OCaml has a really powerful type system
    that can catch some tricky edge cases in our logic at compile
    time. The function <code>Int.rem</code> is just like modulo in
    other languages (I’m using the <code>Base</code> alternate
    standard library for OCaml—the default language comes with a
    <code>mod</code> operator). All the <code>match</code>
    expression in the code above is doing is saying: “If i mod 3 is
    0 and i mod 5 is 0, then print FizzBuzz, else if i mod 3 is 0
    and i mod 5 is anything, then print Fizz, else if i mod 3 is
    anything and i mod 5 is 0, then print Buzz, else print i if
    both are anything”.</p>
    <p>That looks an awful lot like a standard <code>if</code>
    statement to me. The real advantage comes when you forget to
    include a case:</p>
    <div class="org-src-container">
      <pre class="src src-ocaml"><span style=
      "color: #f5deb3; font-weight: bold;">open </span><span style=
      "color: #ECCC87;">Base</span>

<span style="color: #f5deb3; font-weight: bold;">let</span> () =
  <span style="color: #80A0C2;">for</span> i = <span style=
"color: #B58DAE; font-weight: bold;">1</span> <span style=
"color: #80A0C2;">to</span> <span style=
"color: #B58DAE; font-weight: bold;">30</span> <span style=
"color: #80A0C2;">do</span>
    <span style="color: #80A0C2;">match</span> <span style=
"color: #ECCC87;">Int.</span>rem i <span style=
"color: #B58DAE; font-weight: bold;">3</span>, <span style=
"color: #ECCC87;">Int.</span>rem i <span style=
"color: #B58DAE; font-weight: bold;">5</span> <span style=
"color: #80A0C2;">with</span>
    | <span style=
"color: #B58DAE; font-weight: bold;">0</span>, <span style=
"color: #B58DAE; font-weight: bold;">0</span> -&gt; <span style=
"color: #ECCC87;">Stdio.</span>print_endline <span style=
"color: #A2BF8A;">"FizzBuzz"</span>
    | <span style=
"color: #B58DAE; font-weight: bold;">0</span>, _ -&gt; <span style=
"color: #ECCC87;">Stdio.</span>print_endline <span style=
"color: #A2BF8A;">"Fizz"</span>
    | _, <span style=
"color: #B58DAE; font-weight: bold;">0</span> -&gt; <span style=
"color: #ECCC87;">Stdio.</span>print_endline <span style=
"color: #A2BF8A;">"Buzz"</span>
    <span style="color: #6f7787;">(* </span><span style=
"color: #6f7787;">| _, _ -&gt; Stdio.printf "%d\n" i &lt;-- commented out </span><span style="color: #6f7787;">*)</span>
  <span style="color: #80A0C2;">done</span>
</pre>
    </div>
    <pre class="example">
Characters 45-207:
  ....match Int.rem i 3, Int.rem i 5 with
      | 0, 0 -&gt; Stdio.print_endline "FizzBuzz"
      | 0, _ -&gt; Stdio.print_endline "Fizz"
      | _, 0 -&gt; Stdio.print_endline "Buzz"
Warning 8: this pattern-matching is not exhaustive.
Here is an example of a case that is not matched:
(1, 1)
Exception: Match_failure ("//toplevel//", 300, 4).
Raised at file "//toplevel//", line 303, characters 14-40
Called from file "toplevel/toploop.ml", line 180, characters 17-56
</pre>
    <p>This is really cool—OCaml’s compiler knows when the
    <code>match</code> statement doesn’t cover all the possible
    cases and will even give you an example of a case that wasn’t
    met! Once we include that last case, the program will
    successfully compile. Depending how you structure your pattern
    matching, the compiler will sometimes even tell you if you’ve
    used redundant or incorrect cases. It’s a killer feature and I
    wish more languages had it. Exhaustive pattern matching like
    this is usually unique to strongly typed functional programming
    languages, although Rust has also adopted this feature and I’m
    sure others will follow.</p>
    <p>Now for the third and wildest approach to solving the
    FizzBuzz problem—this time with Clojure. Clojure is a Lisp
    dialect that emphasizes functional programming and immutable
    data structures. This language also happens to have great
    support for lazy sequences—a feature that this particular
    FizzBuzz program uses heavily.</p>
    <p>A lazy sequence is not evaluated immediately—instead, it
    delays its evaluation until it is needed by another
    function.</p>
    <p>To illustrate this, here’s the documentation for the
    <code>cycle</code> function in Clojure:</p>
    <div class="org-src-container">
      <pre class="src src-clojure"><span style=
      "color: #80A0C2;">(</span>doc cycle<span style=
      "color: #80A0C2;">)</span>
</pre>
    </div>
    <pre class="example">
-------------------------
clojure.core/cycle
([coll])
  Returns a lazy (infinite!) sequence of repetitions of the items in coll.
</pre>
    <p>How do you use these so-called infinite sequences without
    using up all the memory in your computer? The key to using lazy
    sequences is that these functions are not evaluated until they
    are needed by another function. So running this:</p>
    <div class="org-src-container">
      <pre class="src src-clojure"><span style=
      "color: #80A0C2;">(</span>cycle '<span style=
      "color: #B58DAE;">(</span><span style=
      "color: #A2BF8A;">"Fizz"</span> <span style=
      "color: #A2BF8A;">"Buzz"</span><span style=
      "color: #B58DAE;">)</span><span style=
      "color: #80A0C2;">)</span>
</pre>
    </div>
    <p>would just hang the Clojure session because it’s waiting to
    be evaluated. Let’s fix that by taking some values from this
    infinite sequence.</p>
    <div class="org-src-container">
      <pre class="src src-clojure"><span style=
      "color: #80A0C2;">(</span>take <span style=
      "color: #B58DAE; font-weight: bold;">10</span> <span style=
      "color: #B58DAE;">(</span>cycle '<span style=
      "color: #A2BF8A;">(</span><span style=
      "color: #A2BF8A;">"Fizz"</span> <span style=
      "color: #A2BF8A;">"Buzz"</span><span style=
      "color: #A2BF8A;">)</span><span style=
      "color: #B58DAE;">)</span><span style=
      "color: #80A0C2;">)</span>
</pre>
    </div>
    <table>
      <colgroup>
        <col class="org-left">
        <col class="org-left">
        <col class="org-left">
        <col class="org-left">
        <col class="org-left">
        <col class="org-left">
        <col class="org-left">
        <col class="org-left">
        <col class="org-left">
        <col class="org-left">
      </colgroup>
      <tbody>
        <tr>
          <td class="org-left">Fizz</td>
          <td class="org-left">Buzz</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">Buzz</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">Buzz</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">Buzz</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">Buzz</td>
        </tr>
      </tbody>
    </table>
    <p>Now we can write a completely different FizzBuzz
    implementation leveraging the power of these lazy sequences. I
    modified the example from <a href=
    "http://www.petecorey.com/blog/2018/07/09/golfing-for-fizzbuzz-in-clojure-and-elixir/">
    this blog post</a> so the output would match my Python and
    OCaml programs.</p>
    <div class="org-src-container">
      <pre class="src src-clojure"><span style=
      "color: #80A0C2;">(</span><span style=
      "color: #80A0C2;">doseq</span>
    <span style="color: #B58DAE;">[</span>x
     <span style="color: #A2BF8A;">(</span><span style=
"color: #80A0C2;">-&gt;&gt;</span>
      <span style="color: #80A0C2;">(</span>map list
           <span style="color: #B58DAE;">(</span>range <span style=
"color: #B58DAE; font-weight: bold;">31</span><span style=
"color: #B58DAE;">)</span>
           <span style="color: #B58DAE;">(</span>cycle <span style=
"color: #A2BF8A;">[</span><span style=
"color: #A2BF8A;">"Fizz"</span> <span style=
"color: #A2BF8A;">""</span> <span style=
"color: #A2BF8A;">""</span><span style=
"color: #A2BF8A;">]</span><span style="color: #B58DAE;">)</span>
           <span style="color: #B58DAE;">(</span>cycle <span style=
"color: #A2BF8A;">[</span><span style=
"color: #A2BF8A;">"Buzz"</span> <span style=
"color: #A2BF8A;">""</span> <span style=
"color: #A2BF8A;">""</span> <span style=
"color: #A2BF8A;">""</span> <span style=
"color: #A2BF8A;">""</span><span style=
"color: #A2BF8A;">]</span><span style=
"color: #B58DAE;">)</span><span style="color: #80A0C2;">)</span>
      <span style="color: #80A0C2;">(</span>rest<span style=
"color: #80A0C2;">)</span>
      <span style="color: #80A0C2;">(</span>map <span style=
"color: #B58DAE;">(</span><span style=
"color: #80A0C2;">fn</span> <span style=
"color: #A2BF8A;">[</span>lst<span style="color: #A2BF8A;">]</span>
             <span style="color: #A2BF8A;">(</span><span style=
"color: #80A0C2;">let</span> <span style=
"color: #80A0C2;">[</span>i <span style=
"color: #B58DAE;">(</span>first lst<span style=
"color: #B58DAE;">)</span><span style="color: #80A0C2;">]</span>
               <span style="color: #80A0C2;">(</span><span style=
"color: #80A0C2;">if</span> <span style=
"color: #B58DAE;">(</span><span style=
"color: #80A0C2;">or</span> <span style=
"color: #A2BF8A;">(</span>= <span style=
"color: #B58DAE; font-weight: bold;">0</span> <span style=
"color: #80A0C2;">(</span>mod i <span style=
"color: #B58DAE; font-weight: bold;">3</span><span style=
"color: #80A0C2;">)</span><span style=
"color: #A2BF8A;">)</span> <span style=
"color: #A2BF8A;">(</span>= <span style=
"color: #B58DAE; font-weight: bold;">0</span> <span style=
"color: #80A0C2;">(</span>mod i <span style=
"color: #B58DAE; font-weight: bold;">5</span><span style=
"color: #80A0C2;">)</span><span style=
"color: #A2BF8A;">)</span><span style="color: #B58DAE;">)</span>
                 <span style=
"color: #B58DAE;">(</span>apply str <span style=
"color: #A2BF8A;">(</span>concat <span style=
"color: #80A0C2;">(</span>rest lst<span style=
"color: #80A0C2;">)</span><span style=
"color: #A2BF8A;">)</span><span style="color: #B58DAE;">)</span>
                 <span style=
"color: #B58DAE;">(</span>apply str <span style=
"color: #A2BF8A;">(</span>concat lst<span style=
"color: #A2BF8A;">)</span><span style=
"color: #B58DAE;">)</span><span style=
"color: #80A0C2;">)</span><span style=
"color: #A2BF8A;">)</span><span style=
"color: #B58DAE;">)</span><span style=
"color: #80A0C2;">)</span><span style=
"color: #A2BF8A;">)</span><span style="color: #B58DAE;">]</span>
  <span style="color: #B58DAE;">(</span>println x<span style=
"color: #B58DAE;">)</span><span style="color: #80A0C2;">)</span>
</pre>
    </div>
    <pre class="example">
1
2
Fizz
4
Buzz
Fizz
7
8
Fizz
Buzz
11
Fizz
13
14
FizzBuzz
16
17
Fizz
19
Buzz
Fizz
22
23
Fizz
Buzz
26
Fizz
28
29
FizzBuzz
</pre>
    <p>The four lines of code below is the heart of the program. It
    uses the <code>range</code> function to assign numbers to the
    first elements of the lists and then uses the two
    <code>cycle</code> functions to assign either the empty string,
    Fizz, or Buzz to the second and third elements of the list
    respectively. It’s a really neat declarative way of
    implementing FizzBuzz and my mind was completely blown when I
    understood what the program really does.</p>
    <div class="org-src-container">
      <pre class="src src-clojure"><span style=
      "color: #80A0C2;">(</span>map list
     <span style="color: #B58DAE;">(</span>range <span style=
"color: #B58DAE; font-weight: bold;">31</span><span style=
"color: #B58DAE;">)</span>
     <span style="color: #B58DAE;">(</span>cycle <span style=
"color: #A2BF8A;">[</span><span style=
"color: #A2BF8A;">"Fizz"</span> <span style=
"color: #A2BF8A;">""</span> <span style=
"color: #A2BF8A;">""</span><span style=
"color: #A2BF8A;">]</span><span style="color: #B58DAE;">)</span>
     <span style="color: #B58DAE;">(</span>cycle <span style=
"color: #A2BF8A;">[</span><span style=
"color: #A2BF8A;">"Buzz"</span> <span style=
"color: #A2BF8A;">""</span> <span style=
"color: #A2BF8A;">""</span> <span style=
"color: #A2BF8A;">""</span> <span style=
"color: #A2BF8A;">""</span><span style=
"color: #A2BF8A;">]</span><span style=
"color: #B58DAE;">)</span><span style="color: #80A0C2;">)</span>
</pre>
    </div>
    <table>
      <colgroup>
        <col class="org-right">
        <col class="org-left">
        <col class="org-left">
      </colgroup>
      <tbody>
        <tr>
          <td class="org-right">0</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">Buzz</td>
        </tr>
        <tr>
          <td class="org-right">1</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">2</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">3</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">4</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">5</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">Buzz</td>
        </tr>
        <tr>
          <td class="org-right">6</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">7</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">8</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">9</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">10</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">Buzz</td>
        </tr>
        <tr>
          <td class="org-right">11</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">12</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">13</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">14</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">15</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">Buzz</td>
        </tr>
        <tr>
          <td class="org-right">16</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">17</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">18</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">19</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">20</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">Buzz</td>
        </tr>
        <tr>
          <td class="org-right">21</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">22</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">23</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">24</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">25</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">Buzz</td>
        </tr>
        <tr>
          <td class="org-right">26</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">27</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">28</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">29</td>
          <td class="org-left">&nbsp;</td>
          <td class="org-left">&nbsp;</td>
        </tr>
        <tr>
          <td class="org-right">30</td>
          <td class="org-left">Fizz</td>
          <td class="org-left">Buzz</td>
        </tr>
      </tbody>
    </table>
    <p>I never knew FizzBuzz could be solved in so many different
    ways and it’s a neat little problem to illustrate the strengths
    and styles of different programming languages: Python is great
    for writing legible imperative code that’s simple yet
    expressive. OCaml is great for writing safe strongly typed code
    with exhaustive compiler checks when you need them. Clojure is
    great for writing highly dynamic functional code which uses
    lots of abstractions that makes working with data much
    easier.</p>
    <div class="taglist">
      <a href=
      "https://samarthkishor.github.io/blog/tags.html">Tags</a>:
      <a href=
      "https://samarthkishor.github.io/blog/tag-programming.html">programming</a>
      <a href=
      "https://samarthkishor.github.io/blog/tag-python.html">python</a>
      <a href=
      "https://samarthkishor.github.io/blog/tag-ocaml.html">ocaml</a>
      <a href=
      "https://samarthkishor.github.io/blog/tag-lisp.html">lisp</a>
    </div>
    <div id="archive">
      <a href=
      "https://samarthkishor.github.io/blog/archive.html">Other
      posts</a>
    </div>
  </div>
</body>
</html>
